#! /bin/sh
# configure - configuration script for atrogue 0.3.0
#
# This configuration script file has been auto-generated by
# itchconfig 0.0.4 <http://itchconfig.sourceforge.net/>.
# Copyright (C) 2002 Arne Thomassen <arne@arne-thomassen.de>
# This configuration script file is free software WITHOUT ANY WARRANTY;
# you are given unlimited permission to copy, distribute and modify this file,
# as long as this notice is kept intact and you indicate file modifications.

exec 5>/dev/null
if test -n "${ZSH_VERSION+set}" && (emulate sh) >&5 2>&1; then
  emulate sh
  NULLCMD=:
elif test -n "${BASH_VERSION+set}" && (set -o posix) >&5 2>&1; then
  set -o posix
fi

ic_nl='
'
IFS=" 	$ic_nl"
export IFS

if (FOO=FOO; unset FOO) >&5 2>&1; then
  ic_unset=unset
else
  ic_unset=false
fi

$ic_unset ENV MAIL MAILPATH
PS1='$ '
PS2='> '
PS4='+ '

for i_x in LANG LANGUAGE LC_ALL LC_COLLATE LC_CTYPE LC_MESSAGES LC_NUMERIC LC_TIME
do
  if (set +x; test -n "`(eval $i_x=C; export $i_x) 2>&1`"); then
    eval $i_x=C; export $i_x
  else
    $ic_unset $i_x
  fi
done

ic_me=`echo "$0" | sed 's,.*[/],,'`
ic_version='0.0.4'
ic_package_name='atrogue'
ic_package_version='0.3.0'
ic_fatal_error=echo
ic_show_message=echo
ic_show_info=false

ic_site_file=
ic_site_next=
i_site="${ITCHCONFIG_SITE-}"
if test -n "$i_site"; then
  for i_x in '-atrogue' ''
  do
    i_s=`echo "$i_site" | sed "s,%P%,$i_x,g"`
    if test -n "$i_s" && test -f "$i_s"; then
      ic_site_file="$i_s"
      ic_site_next=init1
      break
    fi
  done
fi

if test -n "$ic_site_file" && test "x$ic_site_next" = xinit1; then
  ic_site_stage=init1
  ic_site_next=
  . "$ic_site_file"
fi

ic_AZ=ABCDEFGHIJKLMNOPQRSTUVWXYZ
ic_az=abcdefghijklmnopqrstuvwxyz
ic_Az=$ic_AZ$ic_az
ic_Az09=${ic_Az}0123456789

# Override env vars?
for i_arg
do
  case $i_arg in
  [_$ic_Az]*=*)
  i_var=`expr "x$i_arg" : 'x\([^=]*\)='`
  i_val=`expr "x$i_arg" : 'x[^=]*=\(.*\)' | sed "s/'/'\\\\\\\\''/g"`
  eval "$i_var='$i_val'"; export $i_var
  ;;
  esac
done

SHELL="${ITCHCONFIG_SHELL-/bin/sh}"
export SHELL
ic_makedir="${MKDIRPROG-mkdir}"
if test "${PATH_SEPARATOR+set}" != set; then
  PATH_SEPARATOR=:
fi
$ic_unset CDPATH

case `echo "testing\c"; echo 1,2,3`,`echo -n testing; echo 1,2,3` in
  *c*,-n*) ic_ECHO_N= ic_ECHO_C='
' ic_ECHO_T='	' ;;
  *c*,*  ) ic_ECHO_N=-n ic_ECHO_C= ic_ECHO_T= ;;
  *)      ic_ECHO_N= ic_ECHO_C='\c' ic_ECHO_T= ;;
esac

ic_option_ncurses=1
ic_option_textmodemouse=0
ic_option_colors=1
ic_option_animation=0
if echo a | (grep -E '(a|b)') >&5 2>&1
  then ic_egrep='grep -E'
  else ic_egrep='egrep'
fi
ic_path_archprefix='${ic_path_prefix}'
ic_path_prefix=/usr/local
ic_path_bin='${ic_path_archprefix}/bin'
ic_path_man='${ic_path_prefix}/man'
ic_installs=
ic_program_prefix=
ic_program_suffix=
ic_binaries=
ic_CC=${CC-gcc}
ic_CFLAGS0="${CFLAGS-}"
ic_CFLAGS="$ic_CFLAGS0"
ic_CPPFLAGS0="${CPPFLAGS-}"
if test "x$ic_CC" = "xgcc"; then
  ic_CFLAGS="-O2 $ic_CFLAGS"
fi
if test "${LDFLAGS+set}" = set; then
  ic_LDFLAGS="$LDFLAGS"
else
  ic_LDFLAGS='-s'
fi
ic_objext="${OBJEXT-o}"


if test -n "$ic_site_file" && test "x$ic_site_next" = xinit2; then
  ic_site_stage=init2
  ic_site_next=
  . "$ic_site_file"
fi

# Parse args
i_premature_exit=a
for i_arg
do

i_aval=`expr "x$i_arg" : 'x[^=]*=\(.*\)'`

case $i_arg in

  --enable-ncurses)
  ic_option_ncurses=1
  ;;

  --disable-ncurses)
  ic_option_ncurses=0
  ;;

  --enable-textmodemouse)
  ic_option_textmodemouse=1
  ;;

  --disable-textmodemouse)
  ic_option_textmodemouse=0
  ;;

  --enable-colors)
  ic_option_colors=1
  ;;

  --disable-colors)
  ic_option_colors=0
  ;;

  --set-animation=*)
  ic_option_animation="$i_aval"
  ;;

  --path-archprefix=*)
  ic_path_archprefix="$i_aval"
  ;;

  --path-prefix=*)
  ic_path_prefix="$i_aval"
  ;;

  --path-bin=*)
  ic_path_bin="$i_aval"
  ;;

  --path-man=*)
  ic_path_man="$i_aval"
  ;;

  --program-prefix=*)
  ic_program_prefix="$i_aval"
  ;;

  --program-suffix=*)
  ic_program_suffix="$i_aval"
  ;;

  --verbose)
  ic_show_info=echo
  ;;

  --quiet)
  ic_fatal_error=false
  ic_show_message=false
  ;;

  --version | -V)
  i_premature_exit=b
  break
  ;;

  --report)
  i_premature_exit=c
  break
  ;;

  --help)
  i_premature_exit=d
  break
  ;;

  --site* | [_$ic_Az]*=*)
  ;;

  *)
  $ic_fatal_error "$ic_me: unrecognized option: $i_arg. Try \"./$ic_me --help\"!" >&2
  { (exit 1); exit 1; }
  ;;

esac
done

case $i_premature_exit in
a)
  ;;
b)
  cat <<EOF
$ic_me - configuration script for atrogue 0.3.0
This configuration script file has been auto-generated by
itchconfig 0.0.4 <http://itchconfig.sourceforge.net/>.
Copyright (C) 2002 Arne Thomassen <arne@arne-thomassen.de>
This configuration script file is free software WITHOUT ANY WARRANTY;
you are given unlimited permission to copy, distribute and modify this file,
as long as this notice is kept intact and you indicate file modifications.
EOF
  { :; exit 0; }
  ;;
c)
  echo "$ic_me report for atrogue 0.3.0 (by itchconfig 0.0.4):"
  if test -f "./config.guess"; then
    i_xv="`./config.guess --version 2>&5 | sed 1q`"
    i_x="`./config.guess 2>&5`"
    echo "config.guess ($i_xv) says: $i_x"
  fi
  i_x="`uname -a 2>&5`"
  echo "uname -a says: $i_x"
  i_x="`make --version 2>&5 | sed 1q`"
  echo "make version: $i_x"
  i_x="`$ic_CC --version 2>&5 | sed 1q`"
  echo "C compiler: $ic_CC, $i_x"
  { :; exit 0; }
  ;;
d)
  cat <<EOF
\`$ic_me' configures atrogue 0.3.0 to adapt to your computer.
Script generated by itchconfig 0.0.4 <http://itchconfig.sourceforge.net/>.
Usage: ./$ic_me [option] ...
Default values are shown in brackets below.

General Options:
--verbose      print more information about what happens
--quiet        don't print any messages
--version, -V  print the version information and exit
--report       print a little configuration report and exit
--help         print this help and exit

Installation Options:
--program-prefix=...  standard program prefix [NONE]
--program-suffix=...  standard program suffix [NONE]

Installation Paths:
--path-archprefix=PATH  path prefix for architecture-dependent files [PREFIX]
--path-prefix=PATH      path prefix for architecture-independent files
                        [/usr/local]
--path-bin=PATH         normal programs [ARCHPREFIX/bin]
--path-man=PATH         manual documentation [PREFIX/man]

Package Options:
--disable-FEATURE       the opposite of --enable-FEATURE
--enable-ncurses        ncurses [ENABLED]
--enable-textmodemouse  text-mode mouse [DISABLED]
--enable-colors         color support [ENABLED]
--set-animation=VALUE   animation speed (msecs) [0]
EOF
  { :; exit 0; }
  ;;
esac

if test -f "object.c"; then :; else
  $ic_fatal_error "$ic_me: configuration script launched from wrong directory!" >&2
  { (exit 1); exit 1; }
fi


# Make sure that paths are absolute
for i_path in ic_path_archprefix ic_path_prefix ic_path_bin ic_path_man
do
eval ic_val=$`echo $i_path`
case $ic_val in
  [/$]*)
  ;;
  *)
  $ic_fatal_error "$ic_me: $i_path must be absolute, but is \"$ic_val\"" >&2
  { (exit 1); exit 1; }
  ;;
esac
done


# Create a temporary directory
{ trap 'exit_status=$?; rm -rf $ic_tempdir && exit $exit_status' 0
  trap '{ (exit 1); exit 1; }' 1 2 13 15
}
: ${TMPDIR=/tmp}
{ ic_tempdir=`(umask 077 && mktemp -d -q "$TMPDIR/icXXXXXX") 2>&5` &&
  test -n "$ic_tempdir" && test -d "$ic_tempdir"
} ||
{ ic_tempdir=$TMPDIR/ic$$-$RANDOM
  (umask 077 && $ic_makedir $ic_tempdir)
} ||
{
  $ic_fatal_error "$ic_me: cannot create a temporary directory in $TMPDIR" >&2
  { (exit 1); exit 1; }
}

$ic_show_info "Configuring atrogue 0.3.0..."
ic_testfile=$ic_tempdir/test
ic_substfile=$ic_tempdir/subst
exec 8>$ic_substfile
ic_int_config_h=$ic_tempdir/int_config.h
echo >$ic_int_config_h
ic_c_definc='#include <stdio.h>
#if HAVE_SYS_TYPES_H
# include <sys/types.h>
#endif
#if HAVE_SYS_STAT_H
# include <sys/stat.h>
#endif
#if STDC_HEADERS
# include <stdlib.h>
# include <stddef.h>
#else
# if HAVE_STDLIB_H
#  include <stdlib.h>
# endif
#endif
#if HAVE_STRING_H
# if !STDC_HEADERS && HAVE_MEMORY_H
#  include <memory.h>
# endif
# include <string.h>
#endif
#if HAVE_STRINGS_H
# include <strings.h>
#endif
#if HAVE_INTTYPES_H
# include <inttypes.h>
#else
# if HAVE_STDINT_H
#  include <stdint.h>
# endif
#endif
#if HAVE_UNISTD_H
# include <unistd.h>
#endif
'

$ic_show_message $ic_ECHO_N "Checking how to run the C pre-processor... $ic_ECHO_C"
if test -n "$CPP" && test -d "$CPP"; then
  CPP=
fi
if test -n "$CPP"; then
  ic_CPP="$CPP"
else
  ic_CPP=
cat >$ic_testfile.c <<__IC_EOF__
#include <assert.h>
  Syntax error
__IC_EOF__
  for CPP in "$ic_CC -E" "$ic_CC -E -traditional-cpp" /lib/cpp
  do
    if $CPP $ic_CPPFLAGS0 $ic_testfile.c >&5 2>&1; then
      ic_CPP="$CPP"
      break
    fi
  done
fi
$ic_show_message "${ic_ECHO_T}$ic_CPP"
if test -z "$ic_CPP"; then
  $ic_fatal_error "$ic_me: cannot find out how to run the C pre-processor; set the environment variable CPP and try again" >&2
  { (exit 1); exit 1; }
fi
$ic_show_message $ic_ECHO_N "Checking for ANSI-compliant C header files... $ic_ECHO_C"
cat >$ic_testfile.c <<__IC_EOF__
#include <stdlib.h>
#include <stdarg.h>
#include <string.h>
#include <float.h>
__IC_EOF__
i_result=0
if $ic_CC $ic_CFLAGS0 $ic_CPPFLAGS0 -c $ic_testfile.c -o $ic_testfile.$ic_objext >&5 2>&5; then
  i_result=1
fi
ic_c_stdc=$i_result

case $ic_c_stdc in
1)
cat >$ic_testfile.c <<__IC_EOF__
#include <string.h>
__IC_EOF__
if $ic_CPP $ic_CPPFLAGS0 $ic_testfile.c 2>&5 | $ic_egrep "memchr" >&5 2>&5; then
  i_result=1
else
  i_result=0
fi
case $i_result in
  0) ic_c_stdc=0 ;;
esac
;;
esac

case $ic_c_stdc in
1)
cat >$ic_testfile.c <<__IC_EOF__
#include <stdlib.h>
__IC_EOF__
if $ic_CPP $ic_CPPFLAGS0 $ic_testfile.c 2>&5 | $ic_egrep "free" >&5 2>&5; then
  i_result=1
else
  i_result=0
fi
case $i_result in
  0) ic_c_stdc=0 ;;
esac
;;
esac

case $ic_c_stdc in
1)
cat >$ic_testfile.c <<__IC_EOF__
#include <ctype.h>
#if ((' ' & 0x0FF) == 0x020)
# define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
# define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
#else
# define ISLOWER(c) (('a' <= (c) && (c) <= 'i') || ('j' <= (c) && (c) <= 'r') || ('s' <= (c) && (c) <= 'z'))
# define TOUPPER(c) (ISLOWER(c) ? ((c) | 0x40) : (c))
#endif

#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
int main()
{ int i;
  for (i = 0; i < 256; i++)
    if (XOR(islower(i), ISLOWER(i))
        || toupper(i) != TOUPPER(i))
      return(2);
  return(0);
}
__IC_EOF__
i_result=0
if $ic_CC $ic_CFLAGS0 $ic_CPPFLAGS0 -c $ic_testfile.c -o $ic_testfile.$ic_objext >&5 2>&5; then
  if $ic_CC $ic_CFLAGS0 $ic_CPPFLAGS0 $ic_LDFLAGS $ic_testfile.$ic_objext $LIBS -o $ic_testfile >&5 2>&5; then
    i_result=1
    $ic_testfile >&5 2>&5
    i_x=$?
    if test "x$i_x" != "x0"; then
      i_result=0
    fi
  fi
fi
case $i_result in
  0) ic_c_stdc=0 ;;
esac
;;
esac

case $ic_c_stdc in
  0) i_x=no ;;
  *) i_x=yes ;;
esac
$ic_show_message "${ic_ECHO_T}$i_x"
echo "#define STDC_HEADERS $ic_c_stdc" >>$ic_int_config_h

# IC_C_HEADERS

for i_header in inttypes.h memory.h stdint.h stdlib.h string.h strings.h sys/stat.h sys/types.h unistd.h
do
i_r=`echo "$i_header" | sed "y,$ic_az,$ic_AZ,;s,[^_${ic_Az09}],_,g"`
i_resultid='HAVE_'${i_r}
$ic_show_message $ic_ECHO_N "Checking whether the C header file $i_header exists... $ic_ECHO_C"
cat >$ic_testfile.c <<__IC_EOF__
#include <$i_header>
__IC_EOF__
i_result=0
if $ic_CC $ic_CFLAGS0 $ic_CPPFLAGS0 -c $ic_testfile.c -o $ic_testfile.$ic_objext >&5 2>&5; then
  i_result=1
fi
case $i_result in
  0) i_x=no ;;
  *) i_x=yes ;;
esac
$ic_show_message "${ic_ECHO_T}$i_x"
echo "#define $i_resultid $i_result" >>$ic_int_config_h
done

ic_makefile=$ic_tempdir/Makefile
exec 6>$ic_makefile
cat >&6 <<EOF
# This Makefile for atrogue 0.3.0 has been auto-generated by     -*-Makefile-*-
# itchconfig 0.0.4 <http://itchconfig.sourceforge.net/>.
# Copyright (C) 2002 Arne Thomassen <arne@arne-thomassen.de>
# This Makefile is free software WITHOUT ANY WARRANTY;
# you are given unlimited permission to copy, distribute and modify this file,
# as long as this notice is kept intact and you indicate file modifications.

all: default-target
SHELL=$SHELL

EOF

ic_config_h=$ic_tempdir/config.h
exec 7>$ic_config_h
cat >&7 <<EOF
/* This config.h file for atrogue 0.3.0 has been auto-generated by      -*-C-*-
   itchconfig 0.0.4 <http://itchconfig.sourceforge.net/>.
   Copyright (C) 2002 Arne Thomassen <arne@arne-thomassen.de>
   This config.h file is free software WITHOUT ANY WARRANTY;
   you are given unlimited permission to copy, distribute and modify this file,
   as long as this notice is kept intact and you indicate file modifications.
*/

EOF

cat >&7 <<EOF
#define ATROGUE_VERSION "0.3.0"
EOF
ic_binaries="$ic_binaries atrogue"
ic_binary_atrogue_libs=
ic_binary_atrogue_c_sources=
ic_binary_atrogue_cflags="$ic_CFLAGS"

ic_binary_atrogue_c_sources="$ic_binary_atrogue_c_sources action.c action.h animation.h creature.c creature.h init.c init.h dungeon.c dungeon.h main.c message.c message.h object.c object.h random.c random.h stat.c stat.h stuff.c stuff.h"
cat >&7 <<EOF
#define USING_CONFIGURE 1
#define OPTION_RNG "/dev/urandom"
#define CONFIG_DEMO 0
#define CONFIG_REMOTE 0
#define CONFIG_GRAPHICS 0
#define CONFIG_DEBUG 0
#define OPTION_NCURSES $ic_option_ncurses
#define OPTION_TEXTMODEMOUSE $ic_option_textmodemouse
#define OPTION_COLORS $ic_option_colors
#define OPTION_ANIMATION $ic_option_animation
EOF
if test "x$ic_option_ncurses" = x1; then
ic_binary_atrogue_libs="$ic_binary_atrogue_libs ncurses"
else
ic_binary_atrogue_libs="$ic_binary_atrogue_libs curses"
fi

# IC_C_HEADERS_STDC

cat >&7 <<EOF
#define STDC_HEADERS $ic_c_stdc
EOF

# IC_C_HEADERS

for i_header in errno.h fcntl.h memory.h stddef.h stdlib.h string.h strings.h sys/stat.h sys/time.h sys/types.h unistd.h ncurses.h
do
i_r=`echo "$i_header" | sed "y,$ic_az,$ic_AZ,;s,[^_${ic_Az09}],_,g"`
i_resultid='HAVE_'${i_r}
$ic_show_message $ic_ECHO_N "Checking whether the C header file $i_header exists... $ic_ECHO_C"
cat >$ic_testfile.c <<__IC_EOF__
#include <$i_header>
__IC_EOF__
i_result=0
if $ic_CC $ic_CFLAGS0 $ic_CPPFLAGS0 -c $ic_testfile.c -o $ic_testfile.$ic_objext >&5 2>&5; then
  i_result=1
fi
case $i_result in
  0) i_x=no ;;
  *) i_x=yes ;;
esac
$ic_show_message "${ic_ECHO_T}$i_x"
cat >&7 <<EOF
#define $i_resultid $i_result
EOF
done

# IC_C_CONST

$ic_show_message $ic_ECHO_N "Checking whether the C const modifier works... $ic_ECHO_C"
cat >$ic_testfile.c <<__IC_EOF__
int main()
{
#ifndef __cplusplus
  /* Ultrix mips cc rejects this. */
  typedef int charset[2];
  const charset x;
  /* SunOS 4.1.1 cc rejects this. */
  char const *const *ccp;
  char **p;
  /* NEC SVR4.0.2 mips cc rejects this. */
  struct point {int x, y;};
  static struct point const zero = {0,0};
  /* AIX XL C 1.02.0.0 rejects this. It does not let you subtract one const X*
     pointer from another in an arm of an if-expression whose if-part is not a
     constant expression. */
  const char *g = "string";
  ccp = &g + (g ? g-g : 0);
  /* HPUX 7.0 cc rejects these. */
  ++ccp;
  p = (char**) ccp;
  ccp = (char const *const *) p;
  { /* SCO 3.2v4 cc rejects this.  */
    char *t;
    char const *s = 0 ? (char *) 0 : (char const *) 0;
    *t++ = 0;
  }
  { /* Someone thinks the Sun supposedly-ANSI compiler will reject this.  */
    int x[] = {25, 17};
    const int *foo = &x[0];
    ++foo;
  }
  { /* Sun SC1.0 ANSI compiler rejects this -- but not the above. */
    typedef const int *iptr;
    iptr p = 0;
    ++p;
  }
  { /* AIX XL C 1.02.0.0 rejects this saying
       "k.c", line 2.27: 1506-025 (S) Operand must be a modifiable lvalue. */
    struct s { int j; const int *ap[3]; };
    struct s *b; b->j = 5;
  }
  { /* ULTRIX-32 V3.1 (Rev 9) vcc rejects this. */
    const int foo = 10;
  }
#endif
  return(0);
}
__IC_EOF__
i_result=0
if $ic_CC $ic_CFLAGS0 $ic_CPPFLAGS0 -c $ic_testfile.c -o $ic_testfile.$ic_objext >&5 2>&5; then
  i_result=1
fi
if test "x$i_result" = "x0"; then
$ic_show_message "${ic_ECHO_T}no"
cat >&7 <<EOF
#define const
EOF
else
$ic_show_message "${ic_ECHO_T}yes"
fi

# IC_C_INLINE

$ic_show_message $ic_ECHO_N "Checking whether the C inline modifier works... $ic_ECHO_C"
working_inline=
for keyword in inline __inline__ __inline
do
cat >$ic_testfile.c <<__IC_EOF__
#ifndef __cplusplus
typedef int foo_type;
static $keyword foo_type static_foo_func() { return(0); }
$keyword foo_type foo_func() { return(0); }
#endif
int main()
{ return(0);
}
__IC_EOF__
i_result=0
if $ic_CC $ic_CFLAGS0 $ic_CPPFLAGS0 -c $ic_testfile.c -o $ic_testfile.$ic_objext >&5 2>&5; then
  i_result=1
fi
if test "x$i_result" = "x1"; then
  working_inline="$keyword"
  break
fi
done
if test "$working_inline" != "inline"; then
cat >&7 <<EOF
#define inline $working_inline
EOF
fi
$ic_show_message "${ic_ECHO_T}$working_inline"

# IC_C_TYPES

$ic_show_message $ic_ECHO_N "Checking whether the C type pid_t exists... $ic_ECHO_C"
cat >$ic_testfile.c <<__IC_EOF__
#include "int_config.h"
$ic_c_definc
int main()
{ if ((pid_t *) 0) return(0);
  if (sizeof(pid_t)) return(0);
  return(0);
}
__IC_EOF__
i_result=0
if $ic_CC $ic_CFLAGS0 $ic_CPPFLAGS0 -c $ic_testfile.c -o $ic_testfile.$ic_objext >&5 2>&5; then
  i_result=1
fi
if test "x$i_result" = "x0"; then
$ic_show_message "${ic_ECHO_T}no"
cat >&7 <<EOF
typedef int pid_t;
EOF
else
$ic_show_message "${ic_ECHO_T}yes"
fi
$ic_show_message $ic_ECHO_N "Checking whether the C type size_t exists... $ic_ECHO_C"
cat >$ic_testfile.c <<__IC_EOF__
#include "int_config.h"
$ic_c_definc
int main()
{ if ((size_t *) 0) return(0);
  if (sizeof(size_t)) return(0);
  return(0);
}
__IC_EOF__
i_result=0
if $ic_CC $ic_CFLAGS0 $ic_CPPFLAGS0 -c $ic_testfile.c -o $ic_testfile.$ic_objext >&5 2>&5; then
  i_result=1
fi
if test "x$i_result" = "x0"; then
$ic_show_message "${ic_ECHO_T}no"
cat >&7 <<EOF
typedef unsigned size_t;
EOF
else
$ic_show_message "${ic_ECHO_T}yes"
fi

# IC_C_FUNCTIONS

for i_func in bcopy bzero gettimeofday memcpy memset select strchr
do
i_r=`echo "$i_func" | sed "y,$ic_az,$ic_AZ,;s,[^_${ic_Az09}],_,g"`
i_resultid='HAVE_'${i_r}
$ic_show_message $ic_ECHO_N "Checking whether the C function $i_func() exists... $ic_ECHO_C"
cat >$ic_testfile.c <<__IC_EOF__
#include "int_config.h"
#include <assert.h>
#ifdef __cplusplus
extern "C"
#endif
char $i_func();
char (*f)();

int main()
{
#if defined(__stub_$i_func) || defined(__stub___$i_func)
  choke me
#else
  f=$i_func;
#endif
  return(0);
}
__IC_EOF__
i_result=0
if $ic_CC $ic_CFLAGS0 $ic_CPPFLAGS0 -c $ic_testfile.c -o $ic_testfile.$ic_objext >&5 2>&5; then
  if $ic_CC $ic_CFLAGS0 $ic_CPPFLAGS0 $ic_LDFLAGS $ic_testfile.$ic_objext $LIBS -o $ic_testfile >&5 2>&5; then
    i_result=1
  fi
fi
case $i_result in
  0) i_x=no ;;
  *) i_x=yes ;;
esac
$ic_show_message "${ic_ECHO_T}$i_x"
cat >&7 <<EOF
#define $i_resultid $i_result
EOF
done
ic_installs="$ic_installs bin"
ic_install_bin_files="atrogue"
ic_install_bin_perm="u=rwx,g=rx,o=rx"
ic_install_bin_magic=m1
ic_installs="$ic_installs man"
ic_install_man_files="docu/atrogue.6"
ic_install_man_perm="u=rw,g=r,o=r"
ic_install_man_magic=m2

if test -n "$ic_binaries"; then
  allbin="all-binaries:"
  for bin in $ic_binaries
  do
    allbin="$allbin binary-$bin"
  done
  cat >&6 <<EOF
$allbin

EOF
  for bin in $ic_binaries
  do
    eval src=$`echo "ic_binary_${bin}_c_sources"`
    eval cflags=$`echo "ic_binary_${bin}_cflags"`
    eval libs0=$`echo "ic_binary_${bin}_libs"`
    libs=
    for lib in $libs0
    do
      case $lib in
        -*) ;;
        *) lib="-l$lib" ;;
      esac
      libs="$libs $lib"
    done
    dep="$src .config"
    ovals=
    if test -n "$src"; then
      for src1 in $src
      do
        case $src1 in
          *.c)
          oval=`expr "x$src1" : 'x*\(.*\)\.c\$'`
          oval=$oval.$ic_objext
          ovals="$ovals $oval"
          cat >&6 <<EOF
$oval: $dep
	$ic_CC $cflags $ic_CPPFLAGS0 -c $src1 -o $oval
EOF
          ;;
        esac
      done
    fi
    cat >&6 <<EOF
binary-$bin: $ovals
	$ic_CC $cflags $ic_CPPFLAGS0 $ic_LDFLAGS $ovals $LIBS $libs -o $bin

EOF
  done
else
  cat >&6 <<EOF
all-binaries:
	@echo "Nothing to do!" >&2
EOF
fi

if test -n "$ic_installs"; then
  allinst="install:"
  for inst in $ic_installs
  do
    eval ic_val=$`echo "ic_install_${inst}_files"`
    if test -n "$ic_val"; then
      eval path=$`echo "ic_path_${inst}" | sed "s,[^$ic_Az09],_,g"`
      eval pfinal0="$path"
      eval pfinal="$pfinal0"
      eval perm=$`echo "ic_install_${inst}_perm"`
      eval magic=$`echo "ic_install_${inst}_magic"`
      allinst="$allinst install-$inst"
      cat >&6 <<EOF
install-$inst:
	@./configure.act --int-install $perm $magic $pfinal "$ic_val"
EOF
    fi
  done
  echo "$allinst" >&6
fi

mf_mostlyclean="	-@rm -f"
for mfm in action. creature. dungeon. init. main. message. object. random. stat. stuff.
do
  mf_mostlyclean="$mf_mostlyclean $mfm$ic_objext"
done
cat >&6 <<EOF

mostlyclean:
$mf_mostlyclean
clean: mostlyclean
	-@rm -f atrogue
distclean: clean
	-@rm -f configure.act .config
	-@if test -f "Makefile-classical"; then mv -f Makefile-classical Makefile; else :; fi
maintainer-clean: distclean
	-@rm -rf *~

default-target: all-binaries
.PHONY: all all-binaries binary-atrogue clean default-target distclean \\\\
        install install-bin install-man maintainer-clean mostlyclean
.SUFFIXES:
.DELETE_ON_ERROR:
.NOEXPORT:
EOF
exec 6>&5
exec 7>&5
exec 8>&5

$ic_show_info "Writing configure.act"
exec 6>configure.act
cat >&6 <<EOFACT
#! $SHELL
# configure.act - configured actions for atrogue 0.3.0
#
# This configuration script file has been auto-generated by
# itchconfig 0.0.4 <http://itchconfig.sourceforge.net/>.
# Copyright (C) 2002 Arne Thomassen <arne@arne-thomassen.de>
# This configuration script file is free software WITHOUT ANY WARRANTY;
# you are given unlimited permission to copy, distribute and modify this file,
# as long as this notice is kept intact and you indicate file modifications.

exec 5>/dev/null
if test -n "\${ZSH_VERSION+set}" && (emulate sh) >&5 2>&1; then
  emulate sh
  NULLCMD=:
elif test -n "\${BASH_VERSION+set}" && (set -o posix) >&5 2>&1; then
  set -o posix
fi

ic_nl='
'
IFS=" 	\$ic_nl"
export IFS

if (FOO=FOO; unset FOO) >&5 2>&1; then
  ic_unset=unset
else
  ic_unset=false
fi

\$ic_unset ENV MAIL MAILPATH
PS1='\$ '
PS2='> '
PS4='+ '

for i_x in LANG LANGUAGE LC_ALL LC_COLLATE LC_CTYPE LC_MESSAGES LC_NUMERIC LC_TIME
do
  if (set +x; test -n "\`(eval \$i_x=C; export \$i_x) 2>&1\`"); then
    eval \$i_x=C; export \$i_x
  else
    \$ic_unset \$i_x
  fi
done

ic_me=\`echo "\$0" | sed 's,.*[/],,'\`
ic_fatal_error=$ic_fatal_error
ic_show_info=$ic_show_info

if test -f "object.c"; then :; else
  \$ic_fatal_error "\$ic_me: configuration script launched from wrong directory!" >&2
  { (exit 1); exit 1; }
fi


case \$1 in
  --int-install)
  mode="\$2"
  magic="\$3"
  initial_path="\$4"
  files="\$5"
  act="\${ITCHCONFIG_ACT-}"
  ic_makedir="\${MKDIRPROG-mkdir}"
  ic_program_prefix="$ic_program_prefix"
  ic_program_suffix="$ic_program_suffix"
  checked_path=
  for one_file in \$files
  do
    path="\$initial_path"
    file=\`echo "\$one_file" | sed 's,.*[/],,'\`
    case \$magic in
    m0) ;;
    m1)
file="\$ic_program_prefix\$file\$ic_program_suffix"
    ;;
    m2)
num=\`echo "\$file" | sed 's,.*\\.\\([0123456789]\\).*,\\1,'\`
path="\$path/man\$num"
    ;;
    *)
    \$ic_fatal_error "\$ic_me: unknown installer magic \\"\$magic\\"" >&2
    { (exit 1); exit 1; }
    ;;
    esac
    if test "x\$checked_path" != "x\$path"; then
      checked_path="\$path"
      parts=\`echo "\$path" | sed 's,/, ,g'\`
      p=
      for part in \$parts
      do
        p="\$p/\$part"
        if test -d "\$p" || \$act \$ic_makedir "\$p"; then :; else
          \$ic_fatal_error "\$ic_me: cannot create directory \\"\$p\\"" >&2
          { (exit 1); exit 1; }
        fi
      done
    fi
    dest_file="\$path/\$file"
    if test -f "\$dest_file"; then
      temp_file=\$path/#itch.\$\$#
      \$act trap "mv -f \$temp_file \$dest_file" 1 2 13 15
      \$act mv -f \$dest_file \$temp_file
      \$act cp \$one_file \$dest_file
      \$act rm -f \$temp_file
    else
      \$act cp \$one_file \$dest_file
    fi
    \$act chmod \$mode \$dest_file
  done
  { :; exit 0; }
  ;;
esac


# Parse args
i_premature_exit=a
for i_arg
do

case \$i_arg in

  --version | -V)
  i_premature_exit=b
  break
  ;;

  --help)
  i_premature_exit=c
  break
  ;;

  *)
  \$ic_fatal_error "\$ic_me: unrecognized option: \$i_arg. Try \\"./\$ic_me --help\\"!" >&2
  { (exit 1); exit 1; }
  ;;

esac
done

case \$i_premature_exit in
a)
  ;;
b)
  cat <<EOF
\$ic_me - configured actions for atrogue 0.3.0
This configuration script file has been auto-generated by
itchconfig 0.0.4 <http://itchconfig.sourceforge.net/>.
Copyright (C) 2002 Arne Thomassen <arne@arne-thomassen.de>
This configuration script file is free software WITHOUT ANY WARRANTY;
you are given unlimited permission to copy, distribute and modify this file,
as long as this notice is kept intact and you indicate file modifications.
EOF
  { :; exit 0; }
  ;;
c)
  cat <<EOF
\\\`\$ic_me' performs configured actions for atrogue 0.3.0.
Script generated by itchconfig 0.0.4 <http://itchconfig.sourceforge.net/>.
Usage: ./\$ic_me [option] ...

General Options:
--version, -V  print the version information and exit
--help         print this help and exit
EOF
  { :; exit 0; }
  ;;
esac

EOFACT

cat >&6 <<EOFACT
if test -f "Makefile-classical"; then :; else
  mv -f Makefile Makefile-classical
fi
EOFACT

cat >&6 <<EOFACT
\$ic_show_info "Writing the Makefile"
EOFACT
echo "cat >Makefile <<EOFINACT" >&6
cat >&6 <$ic_makefile
echo "EOFINACT" >&6

cat >&6 <<EOFACT
\$ic_show_info "Writing the config.h file (.config)"
EOFACT
echo "cat >.config <<EOFINACT" >&6
cat >&6 <$ic_config_h
echo "EOFINACT" >&6

echo "{ :; exit 0; }" >&6
exec 6>&5

$ic_show_info "Executing configure.act"
chmod u+rx configure.act
$SHELL configure.act

{ :; exit 0; }
